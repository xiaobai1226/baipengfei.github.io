---
title: Kotlin-面向对象编程
date: 2022-01-11 19:55:00
sidebar: 'auto'
tags:
 - kotlin基础
categories:
 - Kotlin
prev: ../../2021/12/kotlin-started
next: 
publish: false
---

::: tip
本文大量借鉴或搬运了郭霖大神的《第一行代码》第三版中关于kotlin部分的内容。《第一行代码》是非常好的一本Android入门书籍，推荐大家购买学习。
:::

&emsp;&emsp;和很多现代高级语言一样，Kotlin也是面向对象的，因此理解什么是面向对象编程对我们来说就非常重要了。关于面向对象编程的解释，大家可以自行去查阅相关的资料。  
&emsp;&emsp;这里简单的来解释一下面向对象编程，不同于面向过程的语言（比如C语言），面向对象的语言是可以创建类的。类就是对事物的一种封装，比如说人、汽车、房屋、书等任何事物，我们都可以将它封装一个类，类名通常是名词。而类中又可以拥有自己的字段和函数，字段表示该类所拥有的属性，比如说人可以有姓名和年龄，汽车可以有品牌和价格，这些就属于类中的字段，字段名通常也是名词。而函数则表示该类可以有哪些行为，比如说人可以吃饭和睡觉，汽车可以驾驶和保养等，函数名通常是动词。  
&emsp;&emsp;通过这种类的封装，我们就可以在适当的时候创建该类的对象，然后调用对象中的字段和函数来满足实际编程的需求，这就是面向对象编程最基本的思想。当然，面向对象编程还有很多其他特性，如继承、多态等，但是这些特性都是建立在基本的思想之上的，理解了基本思想之后，其他的特性我们可以在后面慢慢学习。

## 1. 类与对象
现在我们就按照刚才所学的基本思想来尝试进行面向对象编程。首先创建一个Person类。右击com.example.helloworld包→New→Kotlin File/Class，在弹出的对话框中输入“Person”。对话框在默认情况下自动选中的是创建一个File，File通常是用于编写Kotlin顶层函数和扩展函数的，我们可以点击展开下拉列表进行切换，如图2.17所示。  
这里选中Class表示创建一个类，点击“OK”完成创建，会生成如下所示的代码：  
``` kotlin
class Person {

}
```
这是一个空的类实现，可以看到，Kotlin中也是使用class关键字来声明一个类的，这一点和Java一致。现在我们可以在这个类中加入字段和函数来丰富它的功能，这里我准备加入name和age字段，以及一个eat()函数，因为任何一个人都有名字和年龄，也都需要吃饭。
``` kotlin
class Person {
    var name = ""
    var age = 0

    fun eat() {
        println(name + " is eating. He is " + age + "years old.")
    }
}
```
简单解释一下，这里使用var关键字创建了name和age这两个字段，这是因为我们需要在创建对象之后再指定具体的姓名和年龄，而如果使用val关键字的话，初始化之后就不能再重新赋值了。接下来定义了一个eat()函数，并在函数中打印了一句话，非常简单。Person类已经定义好了，接下来我们看一下如何对这个类进行实例化，代码如下所示：
``` kotlin
val p = Person()
```
Kotlin中实例化一个类的方式和Java是基本类似的，只是去掉了new关键字而已。之所以这么设计，是因为当你调用了某个类的构造函数时，你的意图只可能是对这个类进行实例化，因此即使没有new关键字，也能清晰表达出你的意图。Kotlin本着最简化的设计原则，将诸如new、行尾分号这种不必要的语法结构都取消了。  
上述代码将实例化后的类赋值到了p这个变量上面，p就可以称为Person类的一个实例，也可以称为一个对象。  
下面我们开始在main()函数中对p对象进行一些操作：  
``` kotlin
fun main() {
    val p = Person()
    p.name = "Jack"
    p.age = 19
    p.eat()
}
```
这里将p对象的姓名赋值为Jack，年龄赋值为19，然后调用它的eat()函数，运行结果如图2.18所示。  
这就是面向对象编程最基本的用法了，简单概括一下，就是要先将事物封装成具体的类，然后将事物所拥有的属性和能力分别定义成类中的字段和函数，接下来对类进行实例化，再根据具体的编程需求调用类中的字段和方法即可。

## 2. 继承与构造函数
现在我们开始学习面向对象编程中另一个极其重要的特性——继承。继承也是基于现实场景总结出来的一个概念，其实非常好理解。比如现在我们要定义一个Student类，每个学生都有自己的学号和年级，因此我们可以在Student类中加入sno和grade字段。但同时学生也是人呀，学生也会有姓名和年龄，也需要吃饭，如果我们在Student类中重复定义name、age字段和eat()函数的话就显得太过冗余了。这个时候就可以让Student类去继承Person类，这样Student就自动拥有了Person中的字段和函数，另外还可以定义自己独有的字段和函数。  
这就是面向对象编程中继承的思想，很好理解吧？接下来我们尝试用Kotlin语言实现上述功能。右击com.example.helloworld包→New→Kotlin File/Class，在弹出的对话框中输入“Student”，并选择创建一个Class，你可以通过上下按键快速切换创建类型。  
点击“OK”完成创建，并在Student类中加入学号和年级这两个字段，代码如下所示：