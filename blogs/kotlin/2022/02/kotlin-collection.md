---
title: Kotlin-集合
date: 2022-02-09 22:47:00
sidebar: 'auto'
tags:
 - kotlin基础
categories:
 - Kotlin
prev: ../01/kotlin-object-programme
next: 
---

::: tip
本文大量借鉴或搬运了郭霖大神的《第一行代码》第三版中关于kotlin部分的内容。《第一行代码》是非常好的一本Android入门书籍，推荐大家购买学习。
:::

&emsp;&emsp;传统意义上的集合主要就是List和Set，再广泛一点的话，像Map这样的键值对数据结构也可以包含进来。List、Set和Map在Java中都是接口，List的主要实现类是ArrayList和LinkedList，Set的主要实现类是HashSet，Map的主要实现类是HashMap，熟悉Java的人对这些集合的实现类一定不会陌生。  
&emsp;&emsp;现在我们提出一个需求，创建一个包含许多水果名称的集合。如果是在Java中你会怎么实现？可能你首先会创建一个ArrayList的实例，然后将水果的名称一个个添加到集合中。当然，在Kotlin中也可以这么做：
``` kotlin

```
&emsp;&emsp;但是这种初始化集合的方式比较烦琐，为此Kotlin专门提供了一个内置的listOf()函数来简化初始化集合的写法，如下所示：
``` kotlin

```
&emsp;&emsp;可以看到，这里仅用一行代码就完成了集合的初始化操作。  
&emsp;&emsp;还记得我们在学习循环语句时提到过的吗？for-in循环不仅可以用来遍历区间，还可以用来遍历集合。现在我们就尝试一下使用for-in循环来遍历这个水果集合，在main()函数中编写如下代码：
``` kotlin

```
&emsp;&emsp;运行一下代码，结果如图2.23所示  

&emsp;&emsp;不过需要注意的是，listOf()函数创建的是一个不可变的集合。你也许不太能理解什么叫作不可变的集合，因为在Java中这个概念不太常见。不可变的集合指的就是该集合只能用于读取，我们无法对集合进行添加、修改或删除操作。  
&emsp;&emsp;至于这么设计的理由，和val关键字、类默认不可继承的设计初衷是类似的，可见Kotlin在不可变性方面控制得极其严格。那如果我们确实需要创建一个可变的集合呢？也很简单，使用mutableListOf()函数就可以了，示例如下：
``` kotlin

```
&emsp;&emsp;这里先使用mutableListOf()函数创建一个可变的集合，然后向集合中添加了一个新的水果，最后再使用for-in循环对集合进行遍历。现在重新运行一下代码，结果如图2.24所示。

&emsp;&emsp;可以看到，新添加到集合中的水果已经被成功打印出来了。  
&emsp;&emsp;前面我们介绍的都是List集合的用法，实际上Set集合的用法几乎与此一模一样，只是将创建集合的方式换成了setOf()和mutableSetOf()函数而已。大致代码如下：
``` kotlin

```
&emsp;&emsp;需要注意，Set集合中是不可以存放重复元素的，如果存放了多个相同的元素，只会保留其中一份，这是和List集合最大的不同之处。当然这部分知识属于数据结构相关的内容，这里就不展开讨论了。  
&emsp;&emsp;最后再来看一下Map集合的用法。Map是一种键值对形式的数据结构，因此在用法上和List、Set集合有较大的不同。传统的Map用法是先创建一个HashMap的实例，然后将一个个键值对数据添加到Map中。比如这里我们给每种水果设置一个对应的编号，就可以这样写：
``` kotlin

```
&emsp;&emsp;我之所以先用这种写法，是因为这种写法和Java语法是最相似的，因此可能最好理解。但其实在Kotlin中并不建议使用put()和get()方法来对Map进行添加和读取数据操作，而是更加推荐使用一种类似于数组下标的语法结构，比如向Map中添加一条数据就可以这么写：
``` kotlin

```
&emsp;&emsp;而从Map中读取一条数据就可以这么写：
``` kotlin

```
&emsp;&emsp;因此，上述代码经过优化过后就可以变成如下形式：
``` kotlin

```
&emsp;&emsp;当然，这仍然不是最简便的写法，因为Kotlin毫无疑问地提供了一对mapOf()和mutableMapOf()函数来继续简化Map的用法。在mapOf()函数中，我们可以直接传入初始化的键值对组合来完成对Map集合的创建：
``` kotlin

```
&emsp;&emsp;这里的键值对组合看上去好像是使用to这个关键字来进行关联的，但其实to并不是关键字，而是一个infix函数，我们会在本书第9章的Kotlin课堂中深入探究infix函数的相关内容。  
&emsp;&emsp;最后再来看一下如何遍历Map集合中的数据吧，其实使用的仍然是for-in循环。在main()函数中编写如下代码：
``` kotlin

```
&emsp;&emsp;这段代码主要的区别在于，在for-in循环中，我们将Map的键值对变量一起声明到了一对括号里面，这样当进行循环遍历时，每次遍历的结果就会赋值给这两个键值对变量，最后将它们的值打印出来。重新运行一下代码，结果如图2.25所示。

&emsp;&emsp;好了，关于集合的创建与遍历就学到这里，接下来我们开始学习集合的函数式API，从而正式入门Lambda编程。

## 集合的函数式API
``` kotlin

```

``` kotlin

```