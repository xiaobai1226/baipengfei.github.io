(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{535:function(s,t,a){"use strict";a.r(t);var l=a(6),n=Object(l.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("此方法挂载硬盘，无法后期动态扩容，建议使用新方法进行硬盘挂载。"),a("br"),s._v(" "),a("RouterLink",{attrs:{to:"/blogs/linux/2021/08/linux-mount-new.html"}},[s._v("新方法地址")])],1)]),s._v(" "),a("p",[s._v("最近工作碰到一个需求，需要在Linux系统挂载另外的硬盘，实际操作后，整理出这篇教程。"),a("br"),s._v("\n本次实验在VM上新增硬盘，并将分区进行挂载")]),s._v(" "),a("h2",{attrs:{id:"工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工具"}},[s._v("#")]),s._v(" 工具")]),s._v(" "),a("ol",[a("li",[s._v("VMware")]),s._v(" "),a("li",[s._v("Linux系统")])]),s._v(" "),a("h2",{attrs:{id:"前期准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前期准备"}},[s._v("#")]),s._v(" 前期准备")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("给Vmware上的一台linux机器新增加一块硬盘，在需要增加的linux虚机上点击设置"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount1.png",alt:"点击虚机设置"}})])]),s._v(" "),a("li",[a("p",[s._v("在设备列表中，点击添加，选择硬盘，点击下一步\n"),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount2.png",alt:"添加硬盘"}})])]),s._v(" "),a("li",[a("p",[s._v("选择scsi类型的，继续进行下一步"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount3.png",alt:"添加硬盘"}})])]),s._v(" "),a("li",[a("p",[s._v("选择创建新虚拟磁盘"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount4.png",alt:"添加硬盘"}})])]),s._v(" "),a("li",[a("p",[s._v("添加一块10G的硬盘"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount5.png",alt:"添加硬盘"}})])]),s._v(" "),a("li",[a("p",[s._v("给硬盘起个名字，可以的随便起，不重要"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount6.png",alt:"添加硬盘"}})])]),s._v(" "),a("li",[a("p",[s._v("确认后硬盘添加完成，看到设备中已经多了一块10G的硬盘"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount7.png",alt:"添加硬盘"}})])]),s._v(" "),a("li",[a("p",[s._v("登录上服务器后，查看硬盘情况")])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("可以看到，可用磁盘中没有新增的那一块"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount8.png",alt:"df -h"}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这时可以看到，现在Linux系统中，存在一块10G大小的磁盘，但未挂载上，还不能使用。"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount9.png",alt:"fdisk -l"}})]),s._v(" "),a("p",[s._v("至此，前期准备就完成了，接下来开始将这块磁盘挂载到指定目录下，并开始使用它")]),s._v(" "),a("h2",{attrs:{id:"挂载步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载步骤"}},[s._v("#")]),s._v(" 挂载步骤")]),s._v(" "),a("ol",[a("li",[s._v("开始对sdb进行分区")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" 要分区的磁盘路径\n本文为 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" /dev/sdb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount10.png",alt:"fdisk /dev/sdb"}})]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("输入m查看帮助"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount11.png",alt:"m"}})])]),s._v(" "),a("li",[a("p",[s._v("输入n增加一块新分区"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount12.png",alt:"n"}}),a("br"),s._v("\n可以看到有2个选项：e 增加一块拓展分区、p 增加一块主分区，我们选择e 拓展分区"),a("br"),s._v("\n然后选择分区号，这里我们选择1"),a("br"),s._v("\n最后选择磁盘大小，可以看到，系统给了可选择的范围区间，这里我们选择最大值")])]),s._v(" "),a("li",[a("p",[s._v("输入p查看分区表，可以看到这块分区的信息"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount13.png",alt:"fdisk /dev/sdb"}})])]),s._v(" "),a("li",[a("p",[s._v("输入w保存分区，并退出，否则刚刚的操作会丢失"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount14.png",alt:"fdisk /dev/sdb"}})])]),s._v(" "),a("li",[a("p",[s._v("将分区格式化成ext1格式，")])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkfs")]),s._v(" -t ext4 /dev/sdb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount15.png",alt:"fdisk /dev/sdb"}})]),s._v(" "),a("ol",{attrs:{start:"7"}},[a("li",[s._v("然后使用mount命令挂载到/app目录，df -h可以看到已经成功挂载")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/sdb /app\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount16.png",alt:"fdisk /dev/sdb"}}),a("br"),s._v("\n进入/app目录，新建文件进行测试，磁盘可以正常读写就没问题了")]),s._v(" "),a("ol",{attrs:{start:"8"}},[a("li",[s._v("为了防止机器重启，导致分区无法自动挂载，新增sdb的开机自动挂载文件，编辑文件/etc/fstab增加如下信息"),a("br"),s._v(" "),a("img",{attrs:{src:"/img/blogs/2020/10/linux-mount17.png",alt:"fdisk /dev/sdb"}})])]),s._v(" "),a("p",[s._v("至此，磁盘就已挂载完成了")]),s._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://jingyan.baidu.com/article/046a7b3e61a3e7f9c27fa9a8.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://jingyan.baidu.com/article/046a7b3e61a3e7f9c27fa9a8.html"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);