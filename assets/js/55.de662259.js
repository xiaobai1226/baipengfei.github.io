(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{548:function(s,a,e){"use strict";e.r(a);var t=e(6),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"nexus介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nexus介绍"}},[s._v("#")]),s._v(" Nexus介绍")]),s._v(" "),e("p",[s._v("  nexus的全称是Nexus Repository Manager，是Sonatype公司的一个产品。它是一个强大的仓库管理器，极大地简化了内部仓库的维护和外部仓库的访问。"),e("br"),s._v("\n  我们主要用它来搭建公司内部的maven私服。但是它的功能不仅仅是创建maven私有仓库这么简单，还可以作为nuget、docker、npm、bower、pypi、rubygems、git lfs、yum、go、apt等的私有仓库，功能非常强大。")]),s._v(" "),e("h2",{attrs:{id:"前期准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前期准备"}},[s._v("#")]),s._v(" 前期准备")]),s._v(" "),e("ol",[e("li",[s._v("安装Helm")]),s._v(" "),e("li",[s._v("安装k8s")]),s._v(" "),e("li",[s._v("安装cpeh")])]),s._v(" "),e("h2",{attrs:{id:"安装nexus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装nexus"}},[s._v("#")]),s._v(" 安装Nexus")]),s._v(" "),e("h3",{attrs:{id:"_1-添加-nexus-仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-添加-nexus-仓库"}},[s._v("#")]),s._v(" 1. 添加 Nexus 仓库：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加Nexus源")]),s._v("\nhelm repo "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" sonatype https://sonatype.github.io/helm3-charts/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新Helm")]),s._v("\nhelm repo update\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"_2-搜索可用的nexus版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-搜索可用的nexus版本"}},[s._v("#")]),s._v(" 2. 搜索可用的Nexus版本")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("helm search repo sonatype/nexus-repository-manager\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3-将nexus的chart包下载到本地"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-将nexus的chart包下载到本地"}},[s._v("#")]),s._v(" 3. 将Nexus的chart包下载到本地")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("helm fetch sonatype/nexus-repository-manager\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_4-解压文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-解压文件"}},[s._v("#")]),s._v(" 4. 解压文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf nexus-repository-manager-36.0.0.tgz\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压完成后进入目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nexus-repository-manager\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"_5-按需修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-按需修改配置文件"}},[s._v("#")]),s._v(" 5. 按需修改配置文件")]),s._v(" "),e("p",[s._v("修改配置文件 values.yaml，具体查看配置列表"),e("a",{attrs:{href:"https://artifacthub.io/packages/helm/sonatype/nexus-repository-manager",target:"_blank",rel:"noopener noreferrer"}},[s._v("Configuration"),e("OutboundLink")],1),e("br"),s._v("\n我将暴露方式改为了NodePort，并且指定了storageClass，其他保持不变。")]),s._v(" "),e("h3",{attrs:{id:"_6-部署nexus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-部署nexus"}},[s._v("#")]),s._v(" 6. 部署Nexus")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("helm "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nexus ./ -f values.yaml --namespace nexus\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("此时就已安装完成了")]),s._v(" "),e("h2",{attrs:{id:"登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[s._v("#")]),s._v(" 登录")]),s._v(" "),e("h3",{attrs:{id:"_1-获取初始密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取初始密码"}},[s._v("#")]),s._v(" 1. 获取初始密码")]),s._v(" "),e("p",[s._v("缺省管理员账号是admin，默认情况下，会创建PersistentVolumeClaim并将其挂载到/nexus-data目录中，初始密码就在该目录的admin.password文件中。"),e("br"),s._v("\n如果想在安装时指定初始密码，可以通过将环境变量NEXUS_SECURITY_RANDOMPASSWORD设置为“true”达到目的。")]),s._v(" "),e("h3",{attrs:{id:"_2-页面登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-页面登录"}},[s._v("#")]),s._v(" 2. 页面登录")]),s._v(" "),e("p",[s._v("由于选择了NodePort模式，并且未指定nodeport端口，查看后k8s自动分配了32148端口。此时，使用"),e("code",[s._v("http://10.169.136.38:31040")]),s._v("即可登录web管理页面进行使用，初次登陆需修改初始密码。")])])}),[],!1,null,null,null);a.default=r.exports}}]);