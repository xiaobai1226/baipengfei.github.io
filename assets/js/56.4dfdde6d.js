(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{548:function(s,e,a){"use strict";a.r(e);var t=a(6),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("  工作中会使用到内网机器，无法连接互联网，这样就不能方便的配置线上的yum源安装软件，故整理出这篇教程。")]),s._v(" "),a("p",[s._v("  其实原理是把yum源设置成iso文件，然后通过yum来进行安装，"),a("strong",[s._v("所以此方法仅能安装iso镜像中包含的软件")]),s._v("，若想安装其他iso不包含的软件，比如docker等还需自行下载相关文件进行安装。")]),s._v(" "),a("h2",{attrs:{id:"前期准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前期准备"}},[s._v("#")]),s._v(" 前期准备")]),s._v(" "),a("ol",[a("li",[s._v("一台yum系的linux服务器")]),s._v(" "),a("li",[s._v("与linux主机系统对应的iso系统镜像文件（版本最好比系统版本高或一致）")])]),s._v(" "),a("h2",{attrs:{id:"操作步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[s._v("#")]),s._v(" 操作步骤")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("将iso镜像文件上传至linux服务器")]),a("br"),s._v("\n上传后，iso镜像文件所在位置为"),a("code",[s._v("~/rhel-server-7.8-x86_64-dvd.iso")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("执行命令将iso镜像挂载到"),a("code",[s._v("/mnt/cdrom")]),s._v("目录下")]),a("br"),s._v("\n若/mnt目录下没有cdrom文件夹，则需先手动创建一个目录。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" -o loop 镜像文件 /mnt/cdrom\n本文为 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" -o loop ~/rhel-server-7.8-x86_64-dvd.iso /mnt/cdrom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("挂载成功之后 可以"),a("code",[s._v("df -h")]),s._v("看到 iso 文件成功挂载到指定的目录下。\n"),a("img",{attrs:{src:"/img/blogs/2021/08/local-yum-source1.png",alt:"添加硬盘"}})]),s._v(" "),a("p",[s._v("若想要解除挂载，可使用如下命令（本篇教程无需执行）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("umount")]),s._v(" /mnt/cdrom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("设置yum源为本地iso文件")]),a("br"),s._v("\n修改"),a("code",[s._v("/etc/yum.repos.d/rhel-source.repo")]),s._v("文件进行yum源设置"),a("br"),s._v(" "),a("strong",[s._v("注：/etc/yum.repos.d/路径下，后缀为repo的文件均可")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rhel-source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Local Source\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///mnt/cdrom\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-beta,file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("更新yum")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[s._v("至此，就可以用yum install xxx来安装之前提示未安装的那些依赖程序了。")])])}),[],!1,null,null,null);e.default=r.exports}}]);